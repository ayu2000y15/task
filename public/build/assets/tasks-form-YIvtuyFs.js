function _(){var y;const t=document.getElementById("start_date_individual"),e=document.getElementById("duration_individual"),a=document.getElementById("end_date_individual"),b=document.querySelectorAll('input[name="is_milestone_or_folder"]'),u=document.getElementById("task-fields-individual"),l=document.getElementById("status-field-individual"),v=document.getElementById("character_id_wrapper_individual"),m=(y=document.getElementById("parent_id_individual"))==null?void 0:y.closest("div");function c(i){if(!(i instanceof Date)||isNaN(i.getTime()))return"";const s=i.getFullYear(),d=String(i.getMonth()+1).padStart(2,"0"),n=String(i.getDate()).padStart(2,"0");return`${s}-${d}-${n}`}function o(){const i=document.querySelector('input[name="is_milestone_or_folder"]:checked');if(!i||!t||!e||!a)return;const s=i.value;if(s==="milestone"){a.value=t.value;return}if(s==="todo_task"){a.value="";return}if(!t.value||!e.value){a.value="";return}const d=new Date(t.value+"T00:00:00");if(isNaN(d.getTime())){a.value="";return}const n=parseInt(e.value);if(n>0){const r=new Date(d);r.setDate(d.getDate()+n-1),a.value=c(r)}else a.value=""}function g(){const i=document.querySelector('input[name="is_milestone_or_folder"]:checked');if(!i||!t||!a||!e)return;const s=i.value;if(s==="milestone"){e.value=t.value?1:"";return}if(s==="todo_task"){e.value="";return}if(!t.value||!a.value){e.value="";return}const d=new Date(t.value+"T00:00:00"),n=new Date(a.value+"T00:00:00");if(isNaN(d.getTime())||isNaN(n.getTime())){e.value="";return}if(n>=d){const r=n.getTime()-d.getTime(),p=Math.ceil(r/(1e3*60*60*24))+1;e.value=p>0?p:1}else e.value=1}function f(){const i=document.querySelector('input[name="is_milestone_or_folder"]:checked');if(!i)return;const s=i.value,d=[t,e,a],n=document.getElementById("status_individual");v&&(v.style.display="block"),m&&(m.style.display="block"),s==="folder"?(u&&(u.style.display="none"),l&&(l.style.display="none"),d.forEach(r=>{r&&(r.removeAttribute("required"),r.value="")}),n&&n.removeAttribute("required")):s==="milestone"?(u&&(u.style.display="grid"),l&&(l.style.display="block"),t&&(t.removeAttribute("disabled"),t.setAttribute("required","required"),t.value||(t.value=c(new Date))),e&&(e.value=1,e.setAttribute("disabled","disabled"),e.removeAttribute("required")),a&&(a.value=t?t.value:"",a.setAttribute("disabled","disabled"),a.removeAttribute("required")),n&&n.setAttribute("required","required")):s==="task"?(u&&(u.style.display="grid"),l&&(l.style.display="block"),d.forEach(r=>{r&&(r.removeAttribute("disabled"),r.setAttribute("required","required"))}),e&&e.removeAttribute("disabled"),a&&a.removeAttribute("disabled"),t&&!t.value&&(t.value=c(new Date)),e&&!e.value&&(e.value=1),o(),n&&n.setAttribute("required","required")):s==="todo_task"&&(u&&(u.style.display="none"),l&&(l.style.display="block"),d.forEach(r=>{r&&(r.removeAttribute("disabled"),r.removeAttribute("required"),r.value="")}),n&&n.setAttribute("required","required"))}if(t&&t.addEventListener("change",o),e&&(e.addEventListener("input",o),e.addEventListener("change",o)),a&&a.addEventListener("change",g),b.forEach(i=>{i.addEventListener("change",f),i.checked&&f()}),!document.querySelector('input[name="is_milestone_or_folder"]:checked')){const i=document.getElementById("is_task_type_task");i&&(i.checked=!0)}f()}document.getElementById("task-form-page")&&_();const k={initializeTaskFormEventListeners:_};export{k as default};
