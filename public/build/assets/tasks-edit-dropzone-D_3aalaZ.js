import{$ as c}from"./dropzone-DnLKvtV7.js";function m(){const i=document.getElementById("file-upload-dropzone-edit"),t=document.getElementById("task-form-page"),n=document.getElementById("file-list-edit");if(!i||!t||!n)return;c.autoDiscover=!1;const s=t.dataset.projectId,r=t.dataset.taskId;if(!s||!r){console.error("Project ID or Task ID is missing from the page data attributes.");return}const l=`/projects/${s}/tasks/${r}/files`,a=document.querySelector('meta[name="csrf-token"]').getAttribute("content");new c(i,{url:l,headers:{"X-CSRF-TOKEN":a},paramName:"file",maxFilesize:20,addRemoveLinks:!0,dictDefaultMessage:"ここにファイルをドラッグ＆ドロップ<br>またはクリックしてファイルを選択",dictRemoveFile:"×",dictCancelUpload:"-",dictFileTooBig:"ファイルが大きすぎます ({{filesize}}MB)。最大サイズ: {{maxFilesize}}MB。",dictInvalidFileType:"このファイル形式はアップロードできません。",init:function(){this.on("success",function(o,e){e.success&&e.html?n.innerHTML=e.html:(console.error("ファイルのアップロードには成功しましたが、サーバーからの応答が不正です。",e),alert("ファイルの反映に失敗しました。ページをリロードしてください。")),this.removeFile(o)}),this.on("error",function(o,e){console.error("ファイルアップロードエラー:",e);const d=typeof e.message=="string"?e.message:e.error||"不明なエラーが発生しました。";alert(`エラー: ${d}`),this.removeFile(o)})}})}m();
