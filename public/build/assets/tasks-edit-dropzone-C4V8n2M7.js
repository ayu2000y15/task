import{$ as c}from"./dropzone-DnLKvtV7.js";function u(){const n=document.getElementById("file-upload-dropzone-edit"),s=document.getElementById("task-form-page"),a=document.getElementById("file-list-edit"),i=document.getElementById("upload-loader-overlay");if(!n||!s||!a)return;c.autoDiscover=!1;const r=s.dataset.projectId,l=s.dataset.taskId;if(!r||!l){console.error("Project ID or Task ID is missing from the page data attributes.");return}const d=`/projects/${r}/tasks/${l}/files`,m=document.querySelector('meta[name="csrf-token"]').getAttribute("content");new c(n,{url:d,headers:{"X-CSRF-TOKEN":m},paramName:"file",maxFilesize:100,addRemoveLinks:!0,dictDefaultMessage:"ここにファイルをドラッグ＆ドロップ<br>またはクリックしてファイルを選択",dictRemoveFile:"×",dictCancelUpload:"-",dictFileTooBig:"ファイルが大きすぎます ({{filesize}}MB)。最大サイズ: {{maxFilesize}}MB。",dictInvalidFileType:"このファイル形式はアップロードできません。",init:function(){this.on("sending",function(e){i&&i.classList.remove("hidden")}),this.on("queuecomplete",function(){i&&i.classList.add("hidden")}),this.on("success",function(e,t){t.success&&t.html?a.innerHTML=t.html:(console.error("ファイルのアップロードには成功しましたが、サーバーからの応答が不正です。",t),alert("ファイルの反映に失敗しました。ページをリロードしてください。")),this.removeFile(e)}),this.on("error",function(e,t){console.error("ファイルアップロードエラー:",{file:e.name,error:t});let o=`「${e.name}」のアップロードに失敗しました。

`;typeof t=="string"?o+=`理由: ${t}`:t.error?o+=`理由: ${t.error}`:e.xhr&&e.xhr.statusText?o+=`サーバーエラー: ${e.xhr.status} ${e.xhr.statusText}`:o+="サーバーに接続できないか、予期せぬエラーが発生しました。",alert(o),this.removeFile(e)})}})}u();
